# Next.js Slack風チャットアプリケーション

このプロジェクトは、Next.js (App Router)、Node.js (Socket.io)、MongoDBを使用して構築されたSlack風チャットアプリケーションです。技術探求を目的としており、特にリアルタイム通信、認証、データ永続化、会話のスレッド化に焦点を当てています。

## プロジェクトの目的

*   Next.jsのApp Routerベースでのリアルタイムチャットアプリケーションの構築。
*   Node.jsとSocket.ioを用いたリアルタイム通信の実現。
*   MongoDBによるデータの永続化と管理。
*   ログイン機能とチャンネルベースのチャット機能の実装。
*   会話のスレッド化機能の導入。
*   Dockerおよびminikube環境でのデプロイと運用。
*   ゼロトラストの思想を取り入れたセキュリティ意識の高いアプリケーション開発。
*   将来的なPWA通知機能の導入。

## AI駆動開発について

本プロジェクトは、AI駆動開発（AI-Driven Development）のアプローチで進められています。AIエージェントが開発プロセスを主導し、要件定義、設計、実装、デバッグ、ドキュメント作成までの一連のタスクを支援しています。これにより、開発の効率化と品質向上を目指しています。

## アーキテクチャ概要

*   **フロントエンド**: Next.js (App Router)
    *   クライアントコンポーネントでSocket.ioクライアントライブラリを使用してリアルタイム通信。
    *   ログイン、チャットUI、スレッド表示などを実装。
    *   認証情報の管理（JWTをHTTP Only Cookieで保存）。
*   **バックエンド (API)**: Node.js + Express + Socket.ioサーバー
    *   ユーザー認証（ログイン）API。
    *   メッセージ履歴の取得、チャンネル情報取得など、リアルタイムではないデータ取得API。
    *   DAO/Repositoryパターンによるデータベース操作の抽象化。
    *   Socket.ioサーバーへのイベントトリガー。
*   **データベース**: MongoDB
    *   ユーザー情報、チャンネル情報、メッセージ、スレッド情報を格納。
*   **開発環境**: Docker Compose
*   **デプロイ環境 (将来機能)**: minikube上のKubernetesクラスタ

## 開発計画 (ベイビーステップ)

### フェーズ1: 基本的な環境構築とログイン機能 (〜1月末)

1.  Next.jsプロジェクトの作成 (App Router)。
2.  Node.js + Express + Socket.ioサーバープロジェクトの作成。
3.  Docker Composeファイルを作成し、Next.js、Node.js Socket.ioサーバー、MongoDBを連携させる。
4.  MongoDBのスキーマ設計（ユーザー、チャンネル、メッセージ、スレッド）と初期データの投入。
5.  認証バックエンド（ログインAPI、JWTトークン発行、パスワードハッシュ化）の実装。
6.  認証フロントエンド（ログインページ、JWTトークン保存、ルーティングガード）の実装。

### フェーズ2: チャンネルチャットとデータの永続化 (〜2月末)

1.  Socket.ioサーバーで、クライアント接続/切断、認証、チャンネル参加/退出、メッセージ送受信、メッセージ永続化、ブロードキャスト機能を実装。
2.  チャットUI（チャンネルリスト、メッセージ履歴表示、メッセージ送信フォーム、リアルタイムメッセージ表示）の実装。
3.  オンライン状態表示機能の実装。

### フェーズ3: 会話のスレッド化 (〜3月末)

1.  データベーススキーマ拡張（メッセージに`parentId`を追加）。
2.  Socket.ioサーバー拡張（スレッドへの返信処理）。
3.  チャットUI拡張（スレッド表示、返信機能）。

## 開発環境の起動方法 (Docker Compose)

1.  **プロジェクトのクローン**:
    ```bash
    git clone <リポジトリURL>
    cd <プロジェクトディレクトリ>
    ```
2.  **Docker Composeの起動**:
    ```bash
    docker compose up -d
    ```
    *   `-d`オプションでバックグラウンドで実行します。
    *   `--build`オプションは不要です。必要に応じて手動で`docker compose build`を実行してください。
3.  **ブラウザでアクセス**:
    *   フロントエンド: `http://localhost:3000`
    *   バックエンドAPI: `http://localhost:5000`
4.  **初期ユーザーでログイン**:
    *   このリポジトリをクローンして利用する際は、`nextjs-chat-backend/.env`ファイルに設定されている`MONGO_INITDB_ROOT_USERNAME`と`MONGO_INITDB_ROOT_PASSWORD`（デフォルトは`root`と`rootpassword`）でMongoDBにアクセスし、初期ユーザーを作成してください。
    *   **注意**: APIキーや機密情報は、クライアントサイドのコンポーネントに絶対に含めないでください。`env`ファイルなどの環境変数に格納し、適切に管理してください。

## ライセンス

このプロジェクトはMITライセンスの下で公開されています。詳細については`LICENSE`ファイルを参照してください。

## 免責事項と問い合わせ

このリポジトリは技術探求のためのソースコードであり、本番環境での利用は推奨しません。本プロジェクトの利用によって生じたいかなる損害についても、作者は一切の責任を負いません。

いかなる問い合わせ（非建設的な内容）も受け付けておりません。

## 関連ドキュメント

*   `documents/development_plan.md`: 詳細な開発計画。
*   `documents/technical_q_a.md`: 技術的な質問と回答のまとめ。
*   `documents/tips.md`: 開発中に遭遇した問題と解決策のTIPS集。
*   `documents/docker_dev_env_tips.md`: Docker開発環境構築で遭遇した問題と解決策のTIPS集。
*   `documents/minikube_setup.md`: minikube環境構築手順（将来機能）。
*   `documents/minikube_deployment_commands.md`: minikube環境へのデプロイコマンド履歴（将来機能）。

---

**注意**: この`README.md`はAIエージェントによって生成・更新されています。
